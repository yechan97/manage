<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>재고 관리 페이지</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Gowun+Dodum&display=swap">
    <style>
        /* 기존 스타일 유지 */
    </style>
    <!-- Firebase SDK 추가 -->
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore.js"></script>
</head>
<body>
    <div class="container">
        <h1>재고 관리 페이지</h1>

        <!-- 재고 테이블 -->
        <table id="stock-table">
            <thead>
                <tr>
                    <th rowspan="2">매트 종류</th>
                    <th colspan="3">색상</th>
                    <th rowspan="2">합계</th>
                </tr>
                <tr>
                    <th>프렌치바닐라</th>
                    <th>솔리드그레이</th>
                    <th>베이지코튼</th>
                </tr>
            </thead>
            <tbody id="stock-table-body">
                <!-- 동적으로 재고가 여기에 추가될 것임 -->
            </tbody>
        </table>

        <!-- 데이터 기록 내역 -->
        <h3 class="record-table">입출고 기록 내역</h3>
        <table>
            <thead>
                <tr>
                    <th>이름</th>
                    <th>1차 분류</th>
                    <th>매트 종류</th>
                    <th>색상</th>
                    <th>수량</th>
                    <th>비고</th>
                </tr>
            </thead>
            <tbody id="admin-table-body">
                <!-- 데이터가 여기에 동적으로 추가될 것임 -->
            </tbody>
        </table>
    </div>

    <!-- Firebase 초기화 및 데이터 읽기 스크립트 -->
    <script>
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            authDomain: "YOUR_AUTH_DOMAIN",
            projectId: "YOUR_PROJECT_ID",
            storageBucket: "YOUR_STORAGE_BUCKET",
            messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
            appId: "YOUR_APP_ID"
        };
        
        const app = firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        async function loadEntries() {
            const querySnapshot = await db.collection("stock_entries").get();
            const tableBody = document.getElementById("admin-table-body");
            tableBody.innerHTML = "";  // 기존 데이터 초기화

            querySnapshot.forEach(doc => {
                const entry = doc.data();
                const row = `<tr>
                    <td>${entry.name}</td>
                    <td>${entry.category}</td>
                    <td>${entry.matName}</td>
                    <td>${entry.color}</td>
                    <td>${entry.quantity}장</td>
                    <td>${entry.notes}</td>
                </tr>`;
                tableBody.innerHTML += row;
            });
        }

        document.addEventListener("DOMContentLoaded", loadEntries);
    </script>
</body>
</html>
